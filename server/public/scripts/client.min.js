var app=angular.module("OMDBapp",["ngRoute"]);app.config(["$routeProvider",function(a){a.when("/home",{templateUrl:"views/templates/home.html"}).when("/search",{templateUrl:"views/templates/search.html",controller:"SearchController"}).when("/favorites",{templateUrl:"views/templates/favorites.html",controller:"FavoritesController"}).otherwise({redirectTo:"/home"})}]),app.controller("FavoritesController",["$scope","MovieService",function(a,b){a.detailObject=b.detailObject,a.addToFavorites=function(a){b.addToDatabase(a).then(function(a){console.log("returned to favorites controller",a)})},a.favoritesObject=b.favoritesObject,b.getFavorites()}]),app.controller("SearchController",["$scope","MovieService","$location",function(a,b,c){a.searchOMDB=function(a){console.log("Input controller search criteria ",a),b.searchOMDB(a).then(function(a){console.log("Input controller response ",a)})},a.movieObject=b.movieObject,a.defaultPoster={default:"https://cdn.amctheatres.com/Media/Default/Images/noposter.jpg"},a.showDetails=function(a){b.showDetails(a).then(function(a){c.path("/favorites")})}}]),app.factory("MovieService",["$http",function(a){var b={searchResults:[]},c={details:{}},d={favoritesList:[]},e=function(c){return a.get("http://www.omdbapi.com/?s="+c).then(function(a){return console.log("response from OMDB ",a),b.searchResults=a.data.Search,console.log("value of movieObject.searchResults after response ",b),b})},f=function(b){return a.get("http://www.omdbapi.com/?t="+b+"&y=&plot=full&r=json").then(function(a){return c.details=a.data,console.log("details from OMDB: ",c.details.Title),c})},g=function(b){return a.post("/favorites",b).then(function(a){return console.log(a),h(),a})},h=function(){return a.get("/favorites").then(function(a){d.favoritesList=a.data,console.log("get: ",d.favoritesList)})};return{movieObject:b,detailObject:c,searchOMDB:e,showDetails:f,addToDatabase:g,getFavorites:h,favoritesObject:d}}]);